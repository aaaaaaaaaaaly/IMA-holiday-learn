## 实现过程知识补充

### 正规方程实现

#### 核心公式

**注意要先选好矩阵大小y=wx**,
$$
theta=(XX^T)^{-1}X^TY
$$
**注意，y需要转置为n*1的向量**



**if-name-=='-main-:'**类似`int main （）`作为程序入口



#### **查看大小（shape）：**

**大小不符合的报错**

```
shapes (2,442) and (1,442) not aligned: 442 (dim 1) != 1 (dim 0)
```

len（）可以计算列表的长度

np.数组可以用len，size，shape来查看大小



#### **修改列表的大小：**

**删除行：**

`np.delete`（列表名字，删除行的下标，axis=0（用于控制行列,0表示行）

**删除列:**

`np.delete`(列表名字，删除的列的下标，axis=1）



#### **画线的两种方法**

- 通过最大值最小值的范围画拟合线

```
#画回归方程
min_x,max_x = np.min(X),np.max(X)
min_y = theta1*min_x + theta0
max_y = theta1*max_x + theta0
plt.plot((min_x,max_x),(min_y,max_y),c='g')

plt.legend()
plt.show()
```

- 调用`np.inspace`

```
x=np.linspace(x.min(),x.max(),100)
y=theta1+theta0*x
plt.plot(x,y,c='r')
```

- 

```python
#画图
 plt.figure()
plt.scatter(data_x,data_y,c='g')
    plt.plot(data_x,theta[0]+theta[1]*data_x,c='r',laber="Implement")
    plt.plot(data_x,model.predict(data_x),c='blue',label="Sklearn")
plt.show()
```





### **函数方法**

##### 数组方法.min()

```
#一下是数组的方法np.array
a.min()就是返回a中所有元素的最小值
a.min(0)就是返回a中每一列元素的最小值
a.min(1)返回的是a的每行最小值
```

##### 数组方法.`linalg`()

`numpy.linalg`拥有一个矩阵分解的标准函数集。其中包含常见的求逆、行列式等操作。

- `X.T`：返回X的转置
- `inv`(X)：返回X的逆矩阵
- `det`(X)：返回X的行列式
- `eig`(X)：返回X的特征值和特征向量



##### 数组方法`np.vstack`((`array1`，`array2`))

**添加行数**：

按垂直方向（**行顺序**）堆叠数组构成一个新的数组
堆叠的数组需要具有**相同的维度**

![](https://s4.ax1x.com/2022/01/22/7WHn1A.png)



##### 数组方法`np.hstack`((`array1`，`array2`))

**添加列数**：

按水平方向（列顺序）堆叠数组构成一个新的数组
堆叠的数组需要具有**相同的维度**

![](https://s4.ax1x.com/2022/01/22/7WHtpj.png)



##### `np.zeros`()

zeros()返回一个**全0的n维数组**

一共有三个参数：shape（用来指定返回数组的大小） 

​                              ` dtype`（数组元素的类型）

​                              `order`（是否以内存中的C或Fortran连续（行或列）顺序存储多维数据）

​                              后两个参数都是可选的，一般只需设定第一个参数。

![](https://s4.ax1x.com/2022/01/22/7WHT4e.png)



##### `np.ones`()

ones()返回一个全1的n维数组;其他语法和`zeros`一样

![](https://s4.ax1x.com/2022/01/22/7WHzE8.png)



##### `np.sum`()

**语法:**

sum(a, axis=None, `dtype`=None, out=None, `keepdims`=`np._NoValue`)

a是要进行加法运算的向量/数组/矩阵;

axis的取值有三种情况：1.`None`，2.整数， 3.整数元组;(默认取none)



- 如果axis取None，即将数组/矩阵中的**元素全部加起来**，得到一个和。

![](https://s4.ax1x.com/2022/01/22/7WqPIO.png)

- 如果axis为整数，axis的取值**不可大于数组/矩阵的维度**

![](https://s4.ax1x.com/2022/01/22/7WqesI.png)

**操作台**

表现出，axis=0时，同一列的被压缩（加法）到一行

​                axis=1，同一行的被压缩（加法）到一列

![](https://s4.ax1x.com/2022/01/22/7WqlFS.png)

- axis为整数元组（x，y），则是求出axis=x和axis=y情况下得到的和

即当做axis=x求出和；axis=y求出和，最后相加

![](https://s4.ax1x.com/2022/01/22/7WqTld.png)





##### `np.mean（）`

求均值

`numpy.mean(a, axis, dtype, out，keepdims )`

`a:array`

经常操作的参数为axis，以m * n矩阵举例：

- axis 不设置值，对 **m*n 个数求均值**，返回一个实数
- axis = 0：压缩行，对**各列求均值**，1*n(同一列的被压缩（加法）到一行)
- axis =1 ：压缩列，对**各行求均值**，m *1(同一行的被压缩（加法）到一列)

![](https://s4.ax1x.com/2022/01/22/7WOVbt.png)





##### `np.power()`

##### power(x, y) 函数，计算 x 的 y 次方。





##### 求得矩阵的行数和列数

numpy的方法：

- shape方法，shape[0]表示行

![](https://s4.ax1x.com/2022/01/22/7fhmBF.png)

- `len`（），`.ndim`()

注意，`len`（x）求的是行数，`len`(x[0])求的是列数

![](https://s4.ax1x.com/2022/01/22/7fh8c6.png)





##### .absolute()

- 功能:
  对数组中的每一个元素求其绝对值。





##### .all()

**numpy.all(a, axis=None, out=None, `keepdims`=<no value>)**

 all()函数用于判断整个数组中的元素的值是否全部满足条件，如果满足条件返回True，否则返回False。

本质上讲，`all()`实现了或(AND)运算

比如：`np.all(3<4)`





##### .any()

`np.array.any()`是**或**操作，**任意一个元素为True，输出为True。**本质上讲，`any()`实现了或(OR)运算。





**对比sklearn的模型实现**

```python
from sklearn.metrics import mean_squared_error
from sklearn import linear_model 
  y_pred = model.predict(X_test,batch_size = 1)
```



`model.predict`(X_test, batch_size=32，verbose=1)

- X_test：为即将要预测的测试集

- batch_size:为一次性输入多少张图片给网络进行训练，最后输入图片的总数为测试集的个数

- `verbose`:1代表显示进度条，0不显示进度条，默认为0



##### 格式化字符串

`f-string`形式上是以f或者F修饰符引领的字符串，用{ }标明被替代的字段；f-string本质上并不是字符串常量，而是一个在运算求值的表达式

与`str.format（）`函数功能类似

![](https://s4.ax1x.com/2022/01/22/7f3KF1.png)
